<div class="project-heading">
  <h1 ng-if="!editingProject">{{project.name}}</h1>
  <input type="text" ng-model="project.name" ng-if="editingProject" class="big" name="name">
</div>
<button ng-if="canEdit && !editingProject" ng-click="edit()">Edit project</button>
<button ng-if="canEdit && editingProject" ng-click="save()">Save</button>
<button ng-if="canEdit && editingProject" ng-click="cancel()">Cancel</button>
<div class="project-description">
  <p ng-if="!editingProject">{{project.description}}</p>
  <textarea name="description" ng-model="project.description" ng-if="editingProject" cols="30" rows="10"></textarea>
</div>
<h3>Openings</h3>
<!-- Show add openings link only if the last project -->
<p class="a-like" ng-click="addOpening()" ng-if="canEdit && project.openings[project.openings.length-1].id">Add opening</p>
<div class="opening" ng-repeat="opening in project.openings">
  <form ng-submit="save($index)">
    <!-- Name -->
    <div>
      <p class="bold" ng-if="!editingOpenings[$index]">{{opening.name}}</p>
      <input type="text" ng-model="opening.name" ng-if="editingOpenings[$index]" required>
    </div>
    <!-- Description -->
    <div>
      <p class="italic" ng-if="!editingOpenings[$index]">{{opening.description}}</p>
      <textarea cols="30" rows="10" ng-if="ceditingOpenings[$index]" ng-model="opening.description" required></textarea>
    </div>
    <!-- Pay amount, type, and timeframe -->
    <div>
      $<span ng-if="!editingOpenings[$index]">{{opening.pay_amount}}</span>
      <input type="number" ng-if="editingOpenings[$index]" ng-model="opening.pay_amount" required> / 
      <span ng-if="!editingOpenings[$index]">{{opening.pay_type}}</span>
      <select ng-if="editingOpenings[$index]" ng-options="name for name in openingPayTypes" ng-model="opening.pay_type" required></select>
      during
      <span ng-if="!editingOpenings[$index]">{{opening.timeframe}}</span>
      <select ng-if="editingOpenings[$index]" ng-options="name for name in openingTimeframes" ng-model="opening.timeframe" required></select>
    </div>
    <!-- Skills -->
    <div>
      <p class="bold">Skills required</p>
      <div ng-if="!editingOpenings[$index]">
        <span ng-repeat="skill in opening.skills">{{skill.name}} | </span>
      </div>
      <select multiple chosen ng-if="editingOpenings[$index]" ng-options="skill.name for skill in allSkills track by skill.id" ng-model="opening.skills" required style="width: 300px;" data-placeholder="Choose some skills..."></select>
    </div>
    <!-- Control buttons -->
    <button ng-if="canEdit && !editingOpenings[$index]" ng-click="edit($index)">Edit opening</button>
    <input type="submit" value="Save" ng-if="canEdit && editingOpenings[$index]"></input>
    <button ng-if="canEdit && editingOpenings[$index]" ng-click="cancel($index)">Cancel</button>
  </form>
</div>
