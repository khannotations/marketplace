<div class="container-fluid">
  <div class="row">
    <div class="col-sm-10">
      <!-- Search bar and results -->
      <form class='main-search' ng-submit="searchEntered()">
        <div class="searchbox">
          <img src="/assets/searchicon.jpg" alt="" class="searchicon"></img>
          <input type="text" class="searchfield" autofocus="autofocus" ng-model="searchParams.q">
        </div>
      </form>
      <div class="mobile-search no-tablet no-desktop" ng-click="searchParams.options=!searchParams.options">
        <p>More options</p>
      </div>
      <div class="more-options no-desktop" ng-show="searchParams.options">
        <div class="option-block">
          <h1 class="header-medium grey">SHOW</h1>
          <div class="btn-group show">
            <label class="btn btn-primary filter-btn" ng-model="searchParams.show" btn-radio="'all'">both</label>
            <label class="btn btn-primary filter-btn" ng-model="searchParams.show" btn-radio="'openings'">openings</label>
            <label class="btn btn-primary filter-btn" ng-model="searchParams.show" btn-radio="'users'">users</label>
          </div>
          <h1 class="header-medium grey">SORT BY</h1>
          <div class="btn-group sort-by">
            <label class="btn btn-primary filter-btn top" ng-model="searchParams.sort" btn-radio="'newest'">newest</label>
            <label class="btn btn-primary filter-btn" ng-model="searchParams.sort" btn-radio="'pay'">pay</label>
            <label class="btn btn-primary filter-btn bottom" ng-model="searchParams.sort" btn-radio="'relevance'">relevance</label>
          </div>
          <h1 class="header-medium grey">FILTER ON</h1>
          <div class="btn-group filter-on">
            <label class="btn btn-primary filter-btn top" ng-model="tfs.termtime" btn-checkbox>term-time</label>
            <label class="btn btn-primary filter-btn" ng-model="tfs.summer" btn-checkbox>summer</label>
            <label class="btn btn-primary filter-btn bottom" ng-model="tfs.fulltime" btn-checkbox>full-time</label>
          </div>
        </div>
      </div>

      <p class="header-medium grey thin" ng-if="filteredOpenings.length > 0">Found {{filteredOpenings.length}} openings that match your search</p>
      <p class="header-medium grey thin" ng-if="!filteredOpenings.length">No openings match your search.</p>

      <!-- Job Opening returned from search -->
      <div class="opening" ng-init="skillLimit=4" ng-repeat="opening in filteredOpenings | orderBy:sort">
        <div star opening-id="{{opening.id}}" class="star"></div>
        <div class="row">
          <div class="col-xs-8" style="border-right: 1pt solid grey" ui-sref="project({id: opening.project_id})">
              <h1 class="title-small blue no-space">{{opening.name}}</h1>
            
            <h2 class="header-medium grey caps no-space">{{opening.project.name}}</h2>
            <p class="body-text">{{opening.description}}</p>
            <p class="header-medium thin grey">Updated on {{opening.updated_at | date:"medium"}}</p>
          </div>

          <div class="col-xs-2" style="border-right: 1pt solid grey">
            <p class="header-medium grey caps">SKILLS</p>
            <ul ng-click="skillLimit==4 ? skillLimit = 20 : skillLimit = 4" class="list">
              <li class="body-text" ng-repeat="skill in opening.skills | limitTo:skillLimit" >
                {{skill.name}}
              </li>
              <li class="body-text grey" ng-if="opening.skills.length > 4 && skillLimit == 4">
                Show all...
              </li>
              <li class="body-text grey" ng-if="skillLimit == 20">Show fewer...</li>
            </ul>
          </div>
          <div class="col-xs-2">
            <p class="title-small no-space green">${{opening.pay_amount}}</p>
            <p class="header-medium grey caps">{{opening.pay_type}}</p>
            <p class="header-medium">({{opening.timeframe}})</p>
          </div>
        </div>
      </div>
      <hr>
      <p class="header-medium grey thin" ng-if="filteredUsers.length > 0">Found {{filteredUsers.length}} users who match your search.</p>
      <p class="header-medium grey thin" ng-if="!filteredUsers.length">No users match your search</p>
      <!-- Users go here -->
    </div>
    <div class="col-sm-2 no-phone">
      <!-- Options -->
      <div class="blue-button" ng-click="searchParams.options=!searchParams.options">
        <p>More Options</p>
      </div>
      <div class="more-options no-mobile" ng-show="searchParams.options">
        <div class="option-block">
          <h1 class="header-medium grey">SHOW</h1>
          <div class="btn-group show">
            <label class="btn btn-primary filter-btn" ng-model="searchParams.show" btn-radio="'all'">both</label>
            <label class="btn btn-primary filter-btn" ng-model="searchParams.show" btn-radio="'openings'">openings</label>
            <label class="btn btn-primary filter-btn" ng-model="searchParams.show" btn-radio="'users'">users</label>
          </div>
          <h1 class="header-medium grey">SORT BY</h1>
          <div class="btn-group sort-by">
            <label class="btn btn-primary filter-btn top" ng-model="searchParams.sort" btn-radio="'newest'">newest</label>
            <label class="btn btn-primary filter-btn" ng-model="searchParams.sort" btn-radio="'pay'">pay</label>
            <label class="btn btn-primary filter-btn bottom" ng-model="searchParams.sort" btn-radio="'relevance'">relevance</label>
          </div>
          <h1 class="header-medium grey">FILTER ON</h1>
          <div class="btn-group filter-on">
            <label class="btn btn-primary filter-btn top" ng-model="tfs.termtime" btn-checkbox>term-time</label>
            <label class="btn btn-primary filter-btn" ng-model="tfs.summer" btn-checkbox>summer</label>
            <label class="btn btn-primary filter-btn bottom" ng-model="tfs.fulltime" btn-checkbox>full-time</label>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
